# 정규표현식

출처: [점프 투 파이썬](https://wikidocs.net/4308#search)

### 기초 메타문자

##### `[ ]: 사이의 문자중 하나와 매치`

- [abc] : a, b, c중 하나와 매치

- [a-zA-Z] : 모든 알파벳

- [0-9] : 모든 문자(=/d)

[ ] 안의 두 문자 사이의 하이픈은 사이의 범위를 의미한다.

###### 자주 사용하는 문자 클래스

> \d : 숫자와 매치== [0-9]
>
> \D : 숫자가 아닌 것과 매치 == \[^0-9]
>
> \s : whitespace문자와 매치 == [ \t\n\r\f\v]
>
> \S : whitespace가 아닌 것과 매치. == [\^ \t\n\r\f\v]
>
> \w : 문자+숫자와 매치 == [a-zA-Z0-9_]
>
> \W : 문자+숫자가 아닌 문자와 매치==\[^a-zA-Z0-9_]

##### `.: 아무 문자 1개와 매치`

- a.b : a와 b 사이에 들어가는 아무 문자 1개와 매치
- a[.]b : a와 b 사이의 .(점)과 매치



##### `* : *앞의 문자가 0번 이상 반복되는 경우 매치`

- ca*t -> ct, cat, caaaaat과 모두 매치



##### `+ : +앞의 문자가 1번 이상 반복되는 경우 매치`

- ca+t -> cat, caaat은 매치되지만 ct는 매치되지 않음



##### `{m} / {m,n} : 지정된 수만큼 반복되는 경우 매치`

- ca{1}t -> cat만 매치(1번 반복)
- ca{2,4}t -> caat, caaat, caaaat 매치(2~4번 반복)



##### `? : ?앞의 문자가 있는경우, 없는경우 모두 매치`

- ab?c -> abc, ac 모두 매치



### 정규표현식 메서드

##### `math` : 문자열의 처음부터 정규식과 매치되는지 조사

##### `search` : 문자열의 전체를 검색.

- 해당 조건이 발견되면 탐색을 종료한다.

##### `findall` : [a-z]+ 정규식과 매치해서 리스트로 리턴

- 해당 조건이 발견되어도 끝까지 탐색한다.

##### `finditer` : findall과 동일하지만 반복가능한 객체를 리턴. 각 요소는 match객체를 포함



### match 객체의 메서드

만약 search 메서드를 사용했다면 start() 값은 다음과 같이 다르게 나올 것이다.

>group() : 매치된 문자열을 보여준다
>
>start() : 매치된 문자열의 시작 위치를 리턴
>
>end() : 매치된 문장열의 끝 위치를 리턴
>
>span() : 매치된 문자열의 (시작, 끝)에 해당하는 튜플을 리턴



**[모듈 단위로 수행하기]**

re.compile을 사용하여 컴파일 된 객체로 그 이후의 작업을 수행했지만, re.match('[a-z]+', 'Python')과 같은 형태로 축약해서 사용할 수 있다.

- 컴파일과 match 메서드를 한 번에 수행할 수 있다.

-----

## 컴파일 옵션

정규식을 컴파일할 때 다음 옵션을 사용할 수 있다.

##### DOTALL(S) - `.` 이 줄바꿈 문자를 포함하여 모든 문자와 매치할 수 있도록 한다.

- any character 1개와 매치되는 .은 \n과 매치되지 않는데, 이것과도 매치되게 설정하려면 compile시 re.DOTALL or re.S 옵션을 설정해야 한다.

```python
P = re.compile('a.b', re.S)
m = p.match('a\nb')
```



##### IGNORECASE(I) - 대소문자에 관계없이 매치할 수 있도록 한다.

- 대소문자 구분 없이 매치를 수행할 때

##### MULTILINE(M) - 여러줄과 매치할 수 있도록 한다. (`^`, `$` 메타문자의 사용과 관계가 있는 옵션이다)

- re.compile("^python\\s\\w+")처럼 python으로 시작하는 문자열을 추출하고자 하는 상황에서, 데이터로 주어진 문자열이 여러 줄에 걸쳐 구성되고 python으로 시작하는 라인이 많을 때, python으로 시작하는 각 라인을 추출하고 싶다면 MULTILINE 옵션을 설정한다.
- 즉, ^, $ 옵션을 각 줄마다 적용해 주는 것.

##### VERBOSE(X) - verbose 모드를 사용할 수 있도록 한다. (정규식을 보기 편하게 만들수 있고 주석등을 사용할 수 있게된다.)

- 복잡한 정규식을 여러줄에 걸쳐서 입력할 수 있게 해준다. 여러줄에 걸쳐 주석을 달아줄 수 있다.